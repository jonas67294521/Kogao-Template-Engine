Prototype.Browser.IE6=Prototype.Browser.IE&&6==parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5)),Prototype.Browser.IE7=Prototype.Browser.IE&&7==parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5)),Prototype.Browser.IE8=Prototype.Browser.IE&&!Prototype.Browser.IE6&&!Prototype.Browser.IE7;var PrototypeEventPatch={observeOnce:function(e,t,n,o){var r=function(){("function"!=typeof o||o.apply(this,arguments))&&(n.apply(this,arguments),Event.stopObserving(e,t,r))}.bindAsEventListener(e);return Event.observe(e,t,r)}};Object.extend(window.Event,PrototypeEventPatch),Object.extend(document,{observeOnce:PrototypeEventPatch.observeOnce.methodize()}),Element.addMethods({observeOnce:PrototypeEventPatch.observeOnce});var PrototypeElementPatch={delegate:function(e,t,n,o){return(e=$(e)).observe(n,function(e,n){(el=n.findElement(t))&&e.bind(el,n)()}.curry(o)),e},preventTextSelection:function(e){void 0!==e.onselectstart?e.observe("selectstart",function(e){e.preventDefault()}):void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":e.observe("mousedown",function(e){e.preventDefault()})}};function $RF(e,t){if($(e).type&&"radio"==$(e).type.toLowerCase())t=$(e).name,e=$(e).form;else if("form"!=$(e).tagName.toLowerCase())return!1;var n=$(e).getInputs("radio",t).find(function(e){return e.checked});return n?$F(n):null}Element.addMethods(PrototypeElementPatch),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)}),Element.addMethods(),function(){var e={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|mouse(?:down|up|over|move|out))$/},t={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0};Event.simulate=function(n,o){var r,s=Object.extend(t,arguments[2]||{}),a=null;n=$(n);for(var c in e)if(e[c].test(o)){a=c;break}if(!a)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(r=document.createEvent(a),"HTMLEvents"==a?r.initEvent(o,s.bubbles,s.cancelable):r.initMouseEvent(o,s.bubbles,s.cancelable,document.defaultView,s.button,s.pointerX,s.pointerY,s.pointerX,s.pointerY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,n),n.dispatchEvent(r)):(s.clientX=s.pointerX,s.clientY=s.pointerY,r=Object.extend(document.createEventObject(),s),n.fireEvent("on"+o,r)),n},Element.addMethods({simulate:Event.simulate})}(),Object.extend(document,{bufferedEvents:new Hash,fire:document.fire.wrap(function(e,t,n){var o=document.bufferedEvents.get(t);o||(o=new Array,document.bufferedEvents.set(t,o)),o.push(e(t,n))}),observe:document.observe.wrap(function(e,t,n){var o=document.bufferedEvents.get(t);o&&o.each(function(e){n(e)}),e(t,n)})}),Object.extend(Form.Element.Methods,{disable:Form.Element.Methods.disable.wrap(function(e,t){return t.fire("form:disable"),e(t)}),enable:Form.Element.Methods.enable.wrap(function(e,t){return t.fire("form:enable"),e(t)})}),Element.addMethods(["FORM","INPUT","TEXTAREA","SELECT","BUTTON"],{disable:Form.Element.Methods.disable,enable:Form.Element.Methods.enable});